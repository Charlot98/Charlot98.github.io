# 病例报告系统

这是一个完整的病例报告系统，包含三个主要页面。

## 页面说明

### 网页1 - 病例信息上传 (index.html)

**功能：**
- 病例影像下载URL（必填）
- 姓名（自动随机生成）
- 年龄（必填）
- 性别（必填）：雄性、雄性去势、雌性、雌性绝育
- 病史（必填）
- 主诉（必填）
- 病例类型（必填）：X线、B超、CT、MRI
- 辅助信息（非必填）：实验室检查、B超检查、X线检查（支持图片上传）

**病例编号规则：**
- X线：DR000001 开始
- B超：UL000001 开始
- CT：CT000001 开始
- MRI：MRI000001 开始

提交后自动生成病例编号并跳转到预览页面。

### 网页2 - 病例预览 (preview.html)

**功能：**
- 按病例类型分类显示（X线、B超、CT、MRI）
- 显示病例编号、患者信息、创建时间、状态
- 点击病例卡片跳转到报告书写页面

**状态显示：**
- 待书写（黄色）
- 暂存（蓝色）
- 已提交（绿色）

### 网页3 - 报告书写 (report.html)

**功能：**
- **左侧面板（50%）**：
  - 所见输入框
  - 结论输入框
  - 暂存/提交按钮

- **右侧面板（50%）**：
  - 基本信息预览模式：显示病例的所有基本信息
  - 对比模式：显示最终报告，并进行关键词对比

**关键词对比功能：**
- 最终报告中的关键词会被 `<strong>` 标签标注（必须答到的关键词）
- 对比时：
  - ✅ **绿色**：用户已答对的关键词
  - ❌ **红色**：用户未答到的关键词
  - 📌 **黄色背景**：必须答到的关键词标记

**操作流程：**
1. 填写所见和结论
2. 点击"暂存"保存草稿，或点击"提交"提交报告
3. 提交后自动切换到对比模式，查看与最终报告的差异

## 使用方法

### 启动文件上传服务器

**重要：** 在使用图片上传功能前，需要先启动文件上传服务器。

1. **安装依赖**（首次使用）：
   ```bash
   pip install -r requirements.txt
   ```

2. **启动服务器**：
   - Windows: 双击运行 `start-server.bat`
   - 或手动运行: `python server.py`
   
   服务器将在 `http://localhost:5000` 启动

3. **使用网页应用**：
   - 在浏览器中打开 `index.html`
   - 填写病例信息，可选择性上传辅助检查图片
   - 上传的图片会自动保存到 `public` 文件夹，按时间命名
3. **提交病例**：点击"提交并生成病例编号"，系统自动生成编号
4. **查看病例列表**：在网页2查看所有病例
5. **书写报告**：点击病例进入网页3进行报告书写
6. **提交报告**：填写后点击"提交"查看与最终报告的对比

## 数据存储

所有数据存储在浏览器的 `localStorage` 中，包括：
- 病例基本信息
- 用户输入的报告
- 最终报告（包含关键词标注）
- 病例状态

## 技术特点

- 纯前端实现，无需服务器
- 响应式设计，适配各种屏幕
- 关键词自动对比和标注
- 实时状态更新
- 数据持久化存储

## 注意事项

1. 最终报告的关键词需要在 HTML 中使用 `<strong>` 标签标注
2. 所有数据存储在浏览器本地，清除浏览器数据会丢失所有病例
3. 图片上传功能目前只保存文件名，实际文件需要另外存储

## 文件说明

- `index.html` - 病例信息上传页面
- `preview.html` - 病例预览页面
- `report.html` - 报告书写页面
- `server.py` - 文件上传服务器（Python Flask）
- `start-server.bat` - 启动服务器的批处理文件（Windows）
- `requirements.txt` - Python 依赖包列表
- `public/` - 上传图片的存储文件夹
- `README.md` - 本说明文档
