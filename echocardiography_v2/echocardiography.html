<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心超报告生成器</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23e74c3c'><path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/></svg>" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 页面顶部的疾病类型选择 -->
    <div class="top-disease-selector">
        <div class="disease-buttons">
            <button class="disease-button" data-value="Health">健康</button>
            <button class="disease-button" data-value="MMVD">MMVD</button>
            <button class="disease-button" data-value="HCM">HCM</button>
        </div>
        <div class="top-right-controls">
            <div class="reference-range-select-wrapper">
                <label class="reference-range-label">参考：</label>
                <select id="referenceRangeSelect" class="reference-range-select">
                    <option value="">请选择</option>
                    <option value="M型">M型（犬≤3kg）</option>
                    <option value="非M型">非M型（犬＞3kg）</option>
                    <option value="金毛">金毛</option>
                    <option value="猫">猫</option>
                </select>
            </div>
            <div class="weight-input-wrapper" id="weightInputWrapper">
                <label class="weight-label">体重：</label>
                <input type="text" id="weightInput" class="weight-input" data-param="体重" placeholder="kg">
                <span id="weightReferenceDisplay" class="weight-reference-display"></span>
            </div>
        </div>
    </div>
    <div class="container">
        <!-- 主内容区 -->
        <div class="main-content">
            <!-- 参数输入区域（可折叠） -->
            <div class="parameters-container" id="parametersContainer">
            <!-- 1. M型参数 -->
            <div class="parameters-section">
                <div class="parameters-section-header">
                </div>
                <div class="parameters-toggle-header">
                    <button class="collapse-toggle-btn" id="collapseToggleBtn">
                        <span class="collapse-icon">▼</span>
                        <span class="collapse-text">展开参数输入</span>
                    </button>
                </div>
                <div class="parameters-content" id="parametersContent" style="display: none;">
                    <h3 class="parameters-section-title">1. M型</h3>
                    <div class="m-type-grid">
                    <div class="m-type-item">
                        <label class="m-type-label">
                            IVSd
                            <span class="reference-value" data-param="IVSd" data-csv-key="IVSd"></span>
                        </label>
                        <input type="text" class="m-type-input" data-param="IVSd" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">
                            LVDd
                            <span class="reference-value" data-param="LVDd" data-csv-key="LVDd"></span>
                        </label>
                        <input type="text" class="m-type-input" data-param="LVDd" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">
                            LVWd
                            <span class="reference-value" data-param="LVPWd" data-csv-key="LVWd"></span>
                        </label>
                        <input type="text" class="m-type-input" data-param="LVPWd" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">
                            IVSs
                            <span class="reference-value" data-param="IVSs" data-csv-key="IVSs"></span>
                        </label>
                        <input type="text" class="m-type-input" data-param="IVSs" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">
                            LVDs
                            <span class="reference-value" data-param="LVDs" data-csv-key="LVDs"></span>
                        </label>
                        <input type="text" class="m-type-input" data-param="LVDs" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">
                            LVWs
                            <span class="reference-value" data-param="LVPWs" data-csv-key="LVWs"></span>
                        </label>
                        <input type="text" class="m-type-input" data-param="LVPWs" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item" id="edvItem">
                        <label class="m-type-label">
                            EDV
                            <span class="pressure-gradient-label">EDVI:</span>
                            <span class="pressure-gradient-display" id="edviDisplay">-</span>
                        </label>
                        <div class="combined-input-wrapper">
                            <input type="text" class="m-type-input" data-param="EDV" placeholder="请输入数值">
                        </div>
                        <!-- EDV辛普森输入框 -->
                        <div id="edvSimpsonInput" style="display: none; margin-top: 8px;">
                            <div class="combined-input-wrapper">
                                <input type="text" class="m-type-input" data-param="EDV辛普森" placeholder="请输入数值">
                                <div class="pressure-gradient-display-wrapper">
                                    <span class="pressure-gradient-label">辛普森</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="m-type-item" id="esvItem">
                        <label class="m-type-label">
                            ESV
                            <span class="pressure-gradient-label">ESVI:</span>
                            <span class="pressure-gradient-display" id="esviDisplay">-</span>
                        </label>
                        <div class="combined-input-wrapper">
                            <input type="text" class="m-type-input" data-param="ESV" placeholder="请输入数值">
                        </div>
                        <!-- ESV辛普森输入框 -->
                        <div id="esvSimpsonInputContainer" style="display: none; margin-top: 8px;">
                            <div class="combined-input-wrapper">
                                <input type="text" class="m-type-input" data-param="ESV辛普森" placeholder="请输入数值">
                                <div class="pressure-gradient-display-wrapper">
                                    <span class="pressure-gradient-label">辛普森</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">FS</label>
                        <input type="text" class="m-type-input" data-param="FS" placeholder="请输入数值">
                    </div>
                    <div class="m-type-item">
                        <label class="m-type-label">EF</label>
                        <input type="text" class="m-type-input" data-param="EF" placeholder="请输入数值">
                    </div>
                </div>

            <!-- 2. 左房大小 -->
            <div class="parameters-section">
                <h3 class="parameters-section-title">2. 左房大小</h3>
                <div class="other-params-grid">
                    <div class="other-param-item">
                        <label class="other-param-label">
                            LA
                            <span class="reference-value" data-param="LA" data-csv-key="LA"></span>
                        </label>
                        <input type="text" class="other-param-input" data-param="LA" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">
                            Ao
                            <span class="reference-value" data-param="Ao" data-csv-key="Ao"></span>
                        </label>
                        <input type="text" class="other-param-input" data-param="Ao" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">LA/Ao</label>
                        <input type="text" class="other-param-input" data-param="LA/Ao" placeholder="请输入数值">
                    </div>
                </div>
                <!-- MMVD特定输入框 -->
                <div class="other-params-grid" id="mmvdSpecificInputs" style="display: none;">
                    <div class="other-param-item">
                        <label class="other-param-label">二尖瓣前叶厚度 (mm)</label>
                        <input type="text" class="other-param-input" data-param="二尖瓣前叶厚度" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">脱垂程度</label>
                        <select class="other-param-input" data-param="脱垂程度">
                            <option value="">请选择</option>
                            <option value="轻度">轻度</option>
                            <option value="中度">中度</option>
                            <option value="重度">重度</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 3. 彩色多普勒 -->
            <div class="parameters-section">
                <h3 class="parameters-section-title">3. 彩色多普勒</h3>
                <div class="other-params-grid">
                    <div class="other-param-item">
                        <label class="other-param-label">VPA</label>
                        <input type="text" class="other-param-input" data-param="VPA" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">VAO</label>
                        <input type="text" class="other-param-input" data-param="VAO" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">E</label>
                        <input type="text" class="other-param-input" data-param="E" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">A</label>
                        <input type="text" class="other-param-input" data-param="A" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">E/A</label>
                        <input type="text" class="other-param-input" data-param="E/A" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">EA融合</label>
                        <input type="text" class="other-param-input" data-param="EA融合" placeholder="请输入数值">
                    </div>
                    <div class="other-param-item">
                        <label class="other-param-label">E/E'</label>
                        <input type="text" class="other-param-input" data-param="E/E'" placeholder="请输入数值">
                    </div>
                </div>
                <!-- 动态添加的标签页输入框 -->
                <div class="other-params-grid" id="dynamicTagInputs"></div>
            </div>
                </div>
            </div>

            <!-- 模板生成区域 -->
            <div class="template-section">
                <h4>所见</h4>
                <textarea class="template-text" id="findingsText" rows="15" placeholder="请选择疾病类型和参考，模板将自动生成。"></textarea>
                
                <h4 class="conclusion-title">结论</h4>
                <textarea class="template-text" id="conclusionText" rows="8" placeholder="请选择疾病类型和参考，模板将自动生成。"></textarea>
                
                <div style="display: flex; gap: 10px; justify-content: center; margin-top: 10px;">
                    <button class="copy-button" id="copyButton">复制模板</button>
                </div>
            </div>
        </div>

        <!-- 右侧栏 -->
        <div class="sidebar" style="display: none;">
            <div class="form-group">
                <h3>标签页</h3>
                <div class="tag-buttons">
                    <!-- 血液反流分类（红色边框） -->
                    <button class="tag-button tag-button-red" data-tag="二尖瓣反流" style="display: none;">二尖瓣反流</button>
                    <button class="tag-button tag-button-red" data-tag="三尖瓣反流" style="display: none;">三尖瓣反流</button>
                    <button class="tag-button tag-button-red" data-tag="主动脉瓣反流" style="display: none;">主动脉瓣反流</button>
                    <button class="tag-button tag-button-red" data-tag="肺动脉瓣反流" style="display: none;">肺动脉瓣反流</button>
                    
                    <!-- 特殊征象分类（蓝色边框） -->
                    <button class="tag-button tag-button-blue" data-tag="SAM" style="display: none;">SAM</button>
                    <button class="tag-button tag-button-blue" data-tag="假腱索" style="display: none;">假腱索</button>
                    <button class="tag-button tag-button-blue" data-tag="左心房容量" style="display: none;">左心房容量</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
